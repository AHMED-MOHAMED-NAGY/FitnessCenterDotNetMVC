@model User
@{
    ViewData["Title"] = "User Dashboard";
}

<div class="container py-4">
    <!-- Top Bar -->
    <div class="d-flex justify-content-between align-items-center mb-5 p-3 bg-white rounded shadow-sm border">
        <div class="d-flex align-items-center">
            <h3 class="mb-0 fw-bold me-3">@Model.userName</h3> <!-- User Name -->
        </div>
        
        <div class="d-flex gap-3 align-items-center">
            <!-- AI Button -->
            <a asp-action="PlanSelection" class="btn btn-outline-primary fw-bold px-4 rounded-pill">
                <i class="bi bi-robot me-1"></i> AI Plan
            </a>
            
            <!-- Notifications -->
            <button class="btn btn-light position-relative rounded-circle p-2">
                <i class="bi bi-bell fs-5"></i>
                <span class="position-absolute top-0 start-100 translate-middle p-1 bg-danger border border-light rounded-circle">
                    <span class="visually-hidden">New alerts</span>
                </span>
            </button>
            
            <!-- Logout -->
            <a asp-controller="Home" asp-action="Index" class="btn btn-light rounded-circle p-2" title="Logout">
                <i class="bi bi-box-arrow-right fs-5 text-danger"></i>
            </a>
        </div>
    </div>

    <!-- Main Grid -->
    <div class="row g-4 h-100">
        <!-- Left Column: Actions Grid (2x2) -->
        <div class="col-lg-7">
            <div class="row g-3 h-100">
                <!-- Make App -->
                <div class="col-md-6">
                    <a asp-action="MakeAppointment" class="card card-hover h-100 text-decoration-none border-0 shadow-sm bg-primary text-white">
                        <div class="card-body d-flex flex-column justify-content-center align-items-center p-4 text-center">
                            <i class="bi bi-calendar-plus fs-1 mb-3"></i>
                            <h4 class="card-title fw-bold">Make App</h4>
                            <small class="opacity-75">Schedule Appointment</small>
                        </div>
                    </a>
                </div>
                
                 <!-- Send Msg Admin -->
                <div class="col-md-6">
                    <a href="#" class="card card-hover h-100 text-decoration-none border-0 shadow-sm bg-white text-dark">
                        <div class="card-body d-flex flex-column justify-content-center align-items-center p-4 text-center">
                            <i class="bi bi-envelope-paper fs-1 mb-3 text-secondary"></i>
                            <h4 class="card-title fw-bold">Send MSG</h4>
                            <small class="text-muted">To Admin</small>
                        </div>
                    </a>
                </div>

                <!-- Set Cotch -->
                <div class="col-md-6">
                    <a href="#" class="card card-hover h-100 text-decoration-none border-0 shadow-sm bg-white text-dark">
                        <div class="card-body d-flex flex-column justify-content-center align-items-center p-4 text-center">
                            <i class="bi bi-person-lines-fill fs-1 mb-3 text-secondary"></i>
                            <h4 class="card-title fw-bold">Set Cotch</h4>
                            <small class="text-muted">Choose your trainer</small>
                        </div>
                    </a>
                </div>

                 <!-- Send Msg Cotch -->
                <div class="col-md-6">
                    <a href="#" class="card card-hover h-100 text-decoration-none border-0 shadow-sm bg-white text-dark">
                        <div class="card-body d-flex flex-column justify-content-center align-items-center p-4 text-center">
                            <i class="bi bi-chat-dots fs-1 mb-3 text-secondary"></i>
                            <h4 class="card-title fw-bold">Send MSG</h4>
                            <small class="text-muted">To Cotch</small>
                        </div>
                    </a>
                </div>
            </div>
        </div>

        <!-- Right Column: Daily Goal -->
        <div class="col-lg-5">
            <div class="card h-100 border-0 shadow rounded-4">
                <div class="card-header bg-white border-bottom-0 pt-4 pb-0 px-4">
                    <h3 class="fw-bold mb-0 text-success"><i class="bi bi-check2-circle me-2"></i>Daily Goal</h3>
                </div>
                <div class="card-body p-4">
                     <div class="d-flex flex-column h-100">
                        @if(Model.dailyGoal != null)
                        {
                            <div class="bg-light p-4 rounded-3 mb-3 border-start border-5 border-success flex-grow-1">
                                <h5 class="text-muted mb-2">@Model.dailyGoal.date</h5>
                                <p class="fs-4 fw-normal">@Model.dailyGoal.goal</p>
                                
                                <div class="mt-4">
                                    <span class="badge @(Model.dailyGoal.status ? "bg-success" : "bg-warning") p-2 fs-6 rounded-pill">
                                        @(Model.dailyGoal.status ? "Completed" : "In Progress")
                                    </span>
                                </div>
                            </div>
                        }
                        else
                        {
                            <div class="text-center py-5 text-muted">
                                <i class="bi bi-list-check fs-1 mb-3 d-block opacity-25"></i>
                                <p>No goal set for today.</p>
                            </div>
                        }
                     </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    .card-hover {
        transition: transform 0.2s, box-shadow 0.2s;
    }
    .card-hover:hover {
        transform: translateY(-5px);
        box-shadow: 0 .5rem 1rem rgba(0,0,0,.15)!important;
    }
</style>